!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.r(e);var r=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,this.id=i,this.totalPoints=r}var e,n,r;return e=t,(n=[{key:"isNeighbour",value:function(t){return null===this.totalPoints||1===this.id&&t.id===this.totalPoints||this.id===this.totalPoints&&1===t.id||1===Math.abs(this.id-t.id)}},{key:"isFirst",value:function(){return 1===this.id}},{key:"isLast",value:function(){return this.id===this.totalPoints}}])&&i(e.prototype,n),r&&i(e,r),t}();function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=[{do:function(t,e){return t.id!==e[e.length-1].id},description:"Current vertex cannot be same as previous one"},{do:function(t,e){var n=e[e.length-1];return!n||(!n.isLast()||!t.isFirst())&&n.id+1!==t.id},description:"Current vertex cannot be one place away from previous one (anti-clock wise)"},{do:function(t,e){var n=e[e.length-1];return!n||(1===t.id&&n.id===t.totalPoints||(t.id===t.totalPoints&&1===n.id||!(Math.abs(t.id-n.id)>1)))},description:"Current vertex cannot be 2 places away from previous one (Only neighbours are allowed)"},{do:function(t,e){var n=e[e.length-1],i=e[e.length-2];return!n||!i||n.id!==i.id||!t.isNeighbour(n)},description:"A point inside a square repeatedly jumps half of the distance towards a randomly chosen vertex, but the currently chosen vertex cannot neighbor the previously chosen vertex if the two previously chosen vertices are the same."}],u=new(function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.MAX_POINTS=this.initMaxPoints(),this.currentIteration=0,this.points=[],this.vertexes=[],this.reqAnimId=null,this.restrictions=n,this.currentRestriction=null,this.colorMap=(new Map).set(1,"rgba(255, 0, 0, 0.5)").set(2,"rgba(0, 0, 255, 0.5)").set(3,"rgba(0, 255, 0, 0.5)").set(4,"rgba(255, 0, 255, 0.5)").set(5,"rgba(0, 255, 255, 0.5)").set(6,"rgba(255, 255, 0, 0.5)").set(7,"rgba(127, 0, 255, 0.5)").set(8,"rgba(0, 255, 127, 0.5)").set(9,"rgba(255, 127, 0, 0.5)").set(10,"rgba(0, 127, 255, 0.5)").set(11,"rgba(127, 255, 0, 0.5)").set(12,"rgba(255, 0, 127, 0.5)")}var e,n,i;return e=t,(n=[{key:"run",value:function(){this.currentIteration>this.MAX_ITER?this.stop():(this.currentIteration+=this.SKIP_ITER,this.loop(),this.reqAnimId=requestAnimationFrame(this.run.bind(this)))}},{key:"loop",value:function(){for(var t=0;t<this.SKIP_ITER;){this.vertexes.length>5&&this.vertexes.shift();var e=this.vertexes[this.vertexes.length-1],n=this.getNextPoint(),i=this.getMidPointBetween(e,n);this.vertexes.push(i),this.canvas.ctx.fillStyle=this.colorMap.get(i.id),this.canvas.drawPixel(i.x,i.y),t+=1,this.updateIterationText()}}},{key:"updateIterationText",value:function(){document.getElementById("iterations").innerHTML=this.currentIteration}},{key:"getNextPoint",value:function(){var t=this.rand(),e=this.points.find((function(e){return e.id===t}));return this.currentRestriction?this.currentRestriction.do(e,this.vertexes)?e:this.getNextPoint():e}},{key:"rand",value:function(){return Math.floor(Math.random()*this.points.length+1)}},{key:"getMidPointBetween",value:function(t,e){return new r((t.x+e.x)/2,(t.y+e.y)/2,e.id,this.points.length)}},{key:"start",value:function(t){this.stop(),this.MAX_ITER=t.has("max-iterations")?parseInt(t.get("max-iterations")):2e5,this.SKIP_ITER=t.has("skip-iterations")?parseInt(t.get("skip-iterations")):500,this.currentRestriction=t.has("restrictions")&&"null"!==t.get("restrictions")?this.restrictions[parseInt(t.get("restrictions"))]:null,this.currentIteration=0,this.initPoints(),this.canvas.ctx.fillStyle="rgba(0, 0, 0, 1)",this.drawPoints(),this.canvas.ctx.fillStyle="rgba(0, 0, 0, 0.3)";var e=this.canvas.getMiddlePoint();e.id=1,this.vertexes.push(e),this.run()}},{key:"stop",value:function(){cancelAnimationFrame(this.reqAnimId)}},{key:"initPoints",value:function(){this.points=[];for(var t=this.canvas.h/2-50,e=360/this.MAX_POINTS,n=this.canvas.getMiddlePoint(),i=0,s=this.MAX_POINTS%2==0?e/2:90;i<this.MAX_POINTS;i++,s-=e){var a=n.x+t*Math.cos(s*(Math.PI/180)),o=n.y+t*Math.sin(-s*(Math.PI/180));this.points.push(new r(a,o,i+1,this.MAX_POINTS))}}},{key:"drawPoints",value:function(){var t=this;this.canvas.reset(),this.points.forEach((function(e){t.canvas.drawPixel(e.x,e.y,5),t.canvas.drawText(e.id,e.x+10,e.y+10)}))}},{key:"initMaxPoints",value:function(){var t=this,e=document.getElementById("points"),n=parseInt(e.value);return e.addEventListener("change",(function(e){t.stop();var n=parseInt(e.target.value);window.isNaN(n)||(t.MAX_POINTS=n)})),n}}])&&s(e.prototype,n),i&&s(e,i),t}())(new(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.ctx=e.getContext("2d"),this.pixelSize=2}var e,n,i;return e=t,(n=[{key:"drawPixel",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.pixelSize;this.ctx.fillRect(t,e,n,n)}},{key:"drawText",value:function(t,e,n){this.ctx.fillText(t,e,n)}},{key:"getMiddlePoint",value:function(){return new r(this.canvas.width/2,this.canvas.height/2)}},{key:"drawAtTheMiddle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pixelSize;this.ctx.fillRect(this.canvas.width/2,this.canvas.height/2,t,t)}},{key:"reset",value:function(){this.ctx.clearRect(0,0,this.w,this.h)}},{key:"w",get:function(){return this.canvas.width}},{key:"h",get:function(){return this.canvas.height}}])&&a(e.prototype,n),i&&a(e,i),t}())(document.getElementById("canvas")),o);u.initPoints(),u.drawPoints(),document.getElementById("form-start").addEventListener("submit",(function(t){t.preventDefault();var e=new Map(new FormData(t.target));u.start(e)})),document.getElementById("form-stop").addEventListener("submit",(function(t){t.preventDefault(),u.stop()}));var c=document.getElementById("restrictions");o.forEach((function(t,e){var n=document.createElement("option");n.value=e,n.innerText=t.description,c.appendChild(n)}))}]);